import{r as u,u as be,j as e,b as E}from"./app-MyQzOIYu.js";import{u as pe}from"./useFormPersistence-DMUw8EJ0.js";import{I as n}from"./InputLabel-B9tgt652.js";import{T as g,I as x}from"./InputError-DLBJjo5L.js";import{P as y}from"./PrimaryButton-BZ8G2t7v.js";import{S as f}from"./SecondaryButton-D6I9SxXd.js";import{C as V}from"./Checkbox-C7qQV2B0.js";import{P as ye}from"./PersonSelector-DMY8f0yc.js";import{M as ve}from"./Modal-Cb-gwBsU.js";import"./transition-B2H9HuKq.js";function Ae({series:d,genres:W=[],persons:q=[],onClose:_,onSuccess:L}){const[p,M]=u.useState(1),z=()=>{if(!d?.seasons)return[];const r=[];return d.seasons.forEach(t=>{t.episodes?.forEach(s=>{s.watch_links?.forEach(a=>{r.push({id:a.id,season_number:t.season_number,episode_number:s.episode_number,link_category:"watch",server_name:a.server_name,quality:a.quality,type:a.type||(a.embed_code?"embed":"url"),url:a.url||"",embed_code:a.embed_code||"",is_vip_only:!!a.is_vip_only,file_size:"",file_format:""})}),s.download_links?.forEach(a=>{r.push({id:a.id,season_number:t.season_number,episode_number:s.episode_number,link_category:"download",server_name:a.server_name,quality:a.quality,type:"url",url:a.url||"",embed_code:"",is_vip_only:!!a.is_vip_only,file_size:a.file_size||"",file_format:a.file_format||""})})})}),r},O=()=>{if(!d?.seasons)return[];const r=[];return d.seasons.forEach(t=>{t.episodes?.forEach(s=>{r.push({season_number:t.season_number,episode_number:s.episode_number,description:s.description||"",air_date:s.air_date||"",poster_url:s.poster_url||""})})}),r},{data:l,setData:o,post:U,put:H,processing:I,errors:m}=be({title:d?.title||"",slug:d?.slug||"",original_title:d?.original_title||"",description:d?.description||"",release_year_start:d?.release_year_start||"",release_year_end:d?.release_year_end||"",status:d?.status||"ongoing",language:d?.language||"en",country:d?.country||"",age_rating:d?.age_rating||"",is_vip_only:d?.is_vip_only||!1,poster_url:d?.poster_url||"",banner_url:d?.banner_url||"",trailer_url:d?.trailer_url||"",imdb_id:d?.imdb_id||"",genres:d?.genres?.map(r=>r.id)||[],persons:d?.persons?.map(r=>({person_id:r.person_id,role_type:r.role_type,character_name:r.character_name}))||[],episode_links:z(),episodes_data:O()}),Q=d?.id?`series_form_update_${d.id}`:"series_form_create",{clearStorage:Y}=pe(Q,l,o),[K,k]=u.useState(!1),[w,J]=u.useState(""),[P,X]=u.useState([]),[N,v]=u.useState(!1),Z=async r=>{if(r.preventDefault(),!!w){v(!0);try{const t=await E.post(route("admin.tmdb.search"),{query:w,type:"series"});X(t.data.results||[])}catch(t){console.error("TMDB Search Error:",t)}finally{v(!1)}}},ee=async r=>{v(!0);try{const s=(await E.post(route("admin.tmdb.details"),{tmdb_id:r,type:"series"})).data;o(a=>({...a,title:s.title,original_title:s.original_title,description:s.description,release_year_start:s.release_year_start,release_year_end:s.release_year_end||"",status:s.status,language:s.language,country:s.country,poster_url:s.poster_url,banner_url:s.banner_url,trailer_url:s.trailer_url,imdb_id:s.imdb_id})),k(!1)}catch(t){console.error("TMDB Details Error:",t)}finally{v(!1)}},[re,T]=u.useState("");u.useEffect(()=>{if(l.title&&!d?.id){const r=l.title.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"");o("slug",r)}},[l.title]),u.useEffect(()=>{const r=async()=>{if(l.slug)try{(await E.get(route("admin.series.check-slug"),{params:{slug:l.slug,id:d?.id}})).data.exists?T("This slug is already taken."):T("")}catch(s){console.error("Error checking slug:",s)}},t=setTimeout(()=>{r()},500);return()=>clearTimeout(t)},[l.slug,d?.id]);const ae=r=>{const t=l.genres;t.includes(r)?o("genres",t.filter(s=>s!==r)):o("genres",[...t,r])},se=()=>{o("persons",[...l.persons,{person_id:"",role_type:"actor",character_name:""}])},te=r=>{const t=[...l.persons];t.splice(r,1),o("persons",t)},C=(r,t,s)=>{const a=[...l.persons];a[r][t]=s,o("persons",a)},h=u.useMemo(()=>{const r={};return l.episode_links.forEach((t,s)=>{const a=t.season_number||0,c=t.episode_number||0;r[a]||(r[a]={}),r[a][c]||(r[a][c]=[]),r[a][c].push({...t,originalIndex:s})}),l.episodes_data.forEach(t=>{const s=t.season_number||0,a=t.episode_number||0;r[s]||(r[s]={}),r[s][a]||(r[s][a]=r[s][a]||[])}),r},[l.episode_links,l.episodes_data]),S=(r,t,s,a)=>{const c=[...l.episodes_data],R=c.findIndex(G=>G.season_number===r&&G.episode_number===t);R>-1?c[R][s]=a:c.push({season_number:r,episode_number:t,description:"",air_date:"",poster_url:"",[s]:a}),o("episodes_data",c)},[je,le]=u.useState({}),[D,A]=u.useState({}),de=(r,t)=>A(s=>({...s,[`${r}-${t}`]:!s[`${r}-${t}`]})),B=(r,t)=>{o("episode_links",[...l.episode_links,{season_number:r,episode_number:t,link_category:"watch",server_name:"",url:"",embed_code:"",quality:"HD",type:"url",file_format:"MKV",file_size:"",is_vip_only:!1}]),le(s=>({...s,[r]:!0})),A(s=>({...s,[`${r}-${t}`]:!0}))},oe=r=>{const t=[...l.episode_links];t.splice(r,1),o("episode_links",t)},b=(r,t,s)=>{const a=[...l.episode_links];a[r][t]=s,o("episode_links",a)},[fe,_e]=u.useState(""),[ke,we]=u.useState(""),F=r=>{r.preventDefault();const t={onSuccess:()=>{Y(),L&&L(),_&&_()}};d&&d.id?H(route("admin.series.update",d.id),t):U(route("admin.series.store"),t)},ne=()=>M(r=>Math.min(r+1,4)),ie=()=>M(r=>Math.max(r-1,1)),ce=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx(n,{htmlFor:"title",value:"Series Title"}),e.jsx(f,{size:"sm",onClick:()=>k(!0),type:"button",children:"Fetch from TMDB"})]}),e.jsx(g,{id:"title",type:"text",className:"mt-1 block w-full",value:l.title,onChange:r=>o("title",r.target.value),required:!0,placeholder:"e.g. Breaking Bad"}),e.jsx(x,{message:m.title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"original_title",value:"Original Title"}),e.jsx(g,{id:"original_title",type:"text",className:"mt-1 block w-full",value:l.original_title,onChange:r=>o("original_title",r.target.value),placeholder:"Original language title"}),e.jsx(x,{message:m.original_title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"slug",value:"Slug"}),e.jsx(g,{id:"slug",type:"text",className:"mt-1 block w-full",value:l.slug,onChange:r=>o("slug",r.target.value),placeholder:"e.g. breaking-bad"}),e.jsx(x,{message:m.slug||re,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"imdb_id",value:"IMDb ID"}),e.jsx(g,{id:"imdb_id",type:"text",className:"mt-1 block w-full",value:l.imdb_id,onChange:r=>o("imdb_id",r.target.value),placeholder:"tt0903747"}),e.jsx(x,{message:m.imdb_id,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(n,{htmlFor:"description",value:"Synopsis"}),e.jsx("textarea",{id:"description",className:"mt-1 block w-full text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:ring-blue-500 rounded-lg shadow-sm",rows:"4",value:l.description,onChange:r=>o("description",r.target.value),placeholder:"Enter a detailed description of the series..."}),e.jsx(x,{message:m.description,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Genres"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:W.map(r=>e.jsxs("label",{className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700",children:[e.jsx(V,{checked:l.genres.includes(r.id),onChange:()=>ae(r.id)}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r.name})]},r.id))}),e.jsx(x,{message:m.genres,className:"mt-2"})]})]}),ge=()=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4",children:"Details & Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"status",value:"Status"}),e.jsxs("select",{id:"status",className:"mt-1 block w-full border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg shadow-sm",value:l.status,onChange:r=>o("status",r.target.value),children:[e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"ended",children:"Ended"}),e.jsx("option",{value:"canceled",children:"Canceled"})]}),e.jsx(x,{message:m.status,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"release_year_start",value:"Start Year"}),e.jsx(g,{id:"release_year_start",type:"number",className:"mt-1 block w-full",value:l.release_year_start,onChange:r=>o("release_year_start",r.target.value),placeholder:"2008"}),e.jsx(x,{message:m.release_year_start,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"release_year_end",value:"End Year"}),e.jsx(g,{id:"release_year_end",type:"number",className:"mt-1 block w-full",value:l.release_year_end,onChange:r=>o("release_year_end",r.target.value),placeholder:"2013"}),e.jsx(x,{message:m.release_year_end,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"language",value:"Language"}),e.jsx(g,{id:"language",type:"text",className:"mt-1 block w-full",value:l.language,onChange:r=>o("language",r.target.value),placeholder:"en"}),e.jsx(x,{message:m.language,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"country",value:"Country"}),e.jsx(g,{id:"country",type:"text",className:"mt-1 block w-full",value:l.country,onChange:r=>o("country",r.target.value),placeholder:"USA"}),e.jsx(x,{message:m.country,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"age_rating",value:"Age Rating"}),e.jsxs("select",{id:"age_rating",className:"mt-1 block w-full border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 focus:border-blue-500 focus:ring-blue-500 rounded-lg shadow-sm",value:l.age_rating,onChange:r=>o("age_rating",r.target.value),children:[e.jsx("option",{value:"G",children:"Select Rating"}),e.jsx("option",{value:"G",children:"G - General Audiences"}),e.jsx("option",{value:"PG",children:"PG - Parental Guidance"}),e.jsx("option",{value:"PG-13",children:"PG-13"}),e.jsx("option",{value:"18+",children:"18+"}),e.jsx("option",{value:"R",children:"R - Restricted"})]}),e.jsx(x,{message:m.age_rating,className:"mt-2"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",children:[e.jsx(V,{name:"is_vip_only",checked:l.is_vip_only,onChange:r=>o("is_vip_only",r.target.checked)}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-800 dark:text-gray-200",children:"VIP Exclusive"}),e.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400",children:"Only accessible to VIP members"})]})]})})]})]}),me=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-blue-600 dark:text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Media Assets"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"poster_url",value:"Poster URL"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(g,{id:"poster_url",type:"url",className:"mt-1 block w-full",value:l.poster_url,onChange:r=>o("poster_url",r.target.value),placeholder:"https://..."}),l.poster_url&&e.jsx("div",{className:"flex-shrink-0 h-10 w-8 bg-gray-100 dark:bg-gray-700 rounded overflow-hidden border border-gray-200 dark:border-gray-600",children:e.jsx("img",{src:l.poster_url,alt:"Preview",className:"w-full h-full object-cover"})})]}),e.jsx(x,{message:m.poster_url,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"banner_url",value:"Banner/Backdrop URL"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(g,{id:"banner_url",type:"url",className:"mt-1 block w-full",value:l.banner_url,onChange:r=>o("banner_url",r.target.value),placeholder:"https://..."}),l.banner_url&&e.jsx("div",{className:"flex-shrink-0 h-10 w-16 bg-gray-100 dark:bg-gray-700 rounded overflow-hidden border border-gray-200 dark:border-gray-600",children:e.jsx("img",{src:l.banner_url,alt:"Preview",className:"w-full h-full object-cover"})})]}),e.jsx(x,{message:m.banner_url,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"trailer_url",value:"Trailer URL (YouTube/Embed)"}),e.jsx(g,{id:"trailer_url",type:"url",className:"mt-1 block w-full",value:l.trailer_url,onChange:r=>o("trailer_url",r.target.value),placeholder:"https://youtube.com/..."}),e.jsx(x,{message:m.trailer_url,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 dark:text-gray-100",children:"Cast & Crew"}),e.jsx(f,{onClick:se,type:"button",size:"sm",children:"+ Add Person"})]}),e.jsx("div",{className:"space-y-4",children:l.persons.map((r,t)=>e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start border-b border-gray-100 dark:border-gray-700 pb-4 last:border-0",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx(n,{value:"Person"}),e.jsx(ye,{value:r.person_id,onChange:s=>C(t,"person_id",s),persons:q})]}),e.jsxs("div",{className:"w-full md:w-1/4",children:[e.jsx(n,{value:"Role"}),e.jsxs("select",{className:"mt-1 block w-full text-gray-700 dark:text-gray-300 border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 focus:border-blue-500 focus:ring-blue-500 rounded-lg shadow-sm",value:r.role_type,onChange:s=>C(t,"role_type",s.target.value),children:[e.jsx("option",{value:"actor",children:"Actor"}),e.jsx("option",{value:"director",children:"Director"}),e.jsx("option",{value:"writer",children:"Writer"}),e.jsx("option",{value:"producer",children:"Producer"})]})]}),r.role_type==="actor"&&e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx(n,{value:"Character Name"}),e.jsx(g,{className:"mt-1 block w-full",value:r.character_name,onChange:s=>C(t,"character_name",s.target.value),placeholder:"e.g. Walter White"})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"button",onClick:()=>te(t),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},t))}),l.persons.length===0&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 text-center py-4",children:"No cast or crew added yet."})]})]}),ue=()=>d?.seasons&&d.seasons.length>0?Math.max(...d.seasons.map(t=>t.season_number)):1,[i,j]=u.useState(ue());u.useEffect(()=>{const r=Object.keys(h).map(Number).sort((t,s)=>t-s);r.length>0?r.includes(i)||j(r[r.length-1]):j(1)},[h]);const xe=()=>{const r=Object.keys(h).map(Number),t=r.length>0?Math.max(...r)+1:1;j(t)},$=()=>{const r=h[i]?Object.keys(h[i]).map(Number):[],t=r.length>0?Math.max(...r)+1:1;B(i,t)},he=()=>{const r=Object.keys(h).map(Number).sort((s,a)=>s-a),t=h[i]?Object.keys(h[i]).map(Number).sort((s,a)=>s-a):[];return e.jsx("div",{className:"space-y-6 pb-20",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-gray-200 dark:border-gray-700 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-100",children:"Episode Manager"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Manage seasons, episodes, and streaming links."})]}),e.jsx(f,{onClick:xe,className:"w-full sm:w-auto justify-center",children:"+ Add Season"})]}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"flex overflow-x-auto gap-3 pb-2 custom-scrollbar snap-x",children:[r.slice().reverse().map(s=>e.jsxs("button",{type:"button",onClick:()=>j(s),className:`flex-shrink-0 snap-start px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 ${i===s?"bg-blue-600 text-white shadow-lg shadow-blue-500/30 ring-2 ring-blue-600 ring-offset-2 dark:ring-offset-gray-800":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-500 hover:shadow-md"}`,children:["Season ",s]},s)),!r.includes(i)&&e.jsxs("button",{type:"button",className:"flex-shrink-0 px-6 py-2.5 rounded-xl text-sm font-semibold bg-blue-600 text-white shadow-lg shadow-blue-500/30 ring-2 ring-blue-600 ring-offset-2 dark:ring-offset-gray-800",children:["Season ",i," (New)"]})]})}),e.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50/50 dark:bg-gray-800 min-h-[400px]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-700 dark:text-gray-200",children:["Season ",i,e.jsxs("span",{className:"text-gray-500 dark:text-gray-400 font-normal text-sm ml-2",children:["(",t.length," Episodes)"]})]}),e.jsxs(y,{onClick:$,type:"button",className:"w-full sm:w-auto justify-center",children:["+ Add Episode"," ",t.length>0?Math.max(...t)+1:1]})]}),t.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center rounded-2xl border-2 border-dashed border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800/50",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400 dark:text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h5",{className:"text-lg font-medium text-gray-800 dark:text-gray-200 mb-2",children:"No episodes yet"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-xs mx-auto",children:["Add the first episode to Season"," ",i,"."]}),e.jsx(y,{onClick:$,type:"button",children:"Create Episode 1"})]}):e.jsx("div",{className:"space-y-4",children:t.slice().reverse().map(s=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer active:bg-gray-50 dark:active:bg-gray-700/50",onClick:()=>de(i,s),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-50 dark:bg-blue-900/30 flex items-center justify-center text-blue-600 dark:text-blue-400 font-bold",children:s}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-gray-800 dark:text-gray-200",children:["Episode ",s]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[h[i][s].length," ","Links"]})]})]}),e.jsx("div",{className:`p-2 rounded-full bg-gray-50 dark:bg-gray-700/50 text-gray-400 transition-transform duration-200 ${D[`${i}-${s}`]?"rotate-180 bg-blue-50 dark:bg-blue-900/30 text-blue-500 dark:text-blue-400":""}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),D[`${i}-${s}`]&&e.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/30 p-4 space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm space-y-4",children:[e.jsx("h6",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Episode Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(n,{value:"Description"}),e.jsx("textarea",{className:"mt-1 block w-full text-sm border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 rounded-lg focus:border-blue-500 focus:ring-blue-500",rows:"2",value:l.episodes_data.find(a=>a.season_number===i&&a.episode_number===s)?.description||"",onChange:a=>S(i,s,"description",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Air Date"}),e.jsx(g,{type:"date",className:"mt-1 block w-full text-sm",value:l.episodes_data.find(a=>a.season_number===i&&a.episode_number===s)?.air_date||"",onChange:a=>S(i,s,"air_date",a.target.value)})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Poster URL"}),e.jsx("div",{className:"flex gap-2",children:e.jsx(g,{type:"url",className:"mt-1 block w-full text-sm",value:l.episodes_data.find(a=>a.season_number===i&&a.episode_number===s)?.poster_url||"",onChange:a=>S(i,s,"poster_url",a.target.value),placeholder:"https://..."})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h6",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Streaming & Download Links"}),h[i][s].map(a=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm relative",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2.5 py-1 rounded-md text-xs font-medium ${a.link_category==="watch"?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"bg-green-50 text-green-600 dark:bg-green-900/30 dark:text-green-400"}`,children:a.link_category==="watch"?"Stream":"Download"}),a.server_name&&e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-md",children:a.server_name})]}),e.jsx("button",{type:"button",onClick:()=>oe(a.originalIndex),className:"p-2 text-gray-400 hover:text-red-500 dark:hover:text-red-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(n,{value:"Category"}),e.jsxs("select",{className:"w-full text-sm rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 focus:border-blue-500 focus:ring-blue-500",value:a.link_category,onChange:c=>b(a.originalIndex,"link_category",c.target.value),children:[e.jsx("option",{value:"watch",children:"Stream"}),e.jsx("option",{value:"download",children:"Download"})]})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Server Name"}),e.jsx(g,{className:"w-full text-sm",value:a.server_name,onChange:c=>b(a.originalIndex,"server_name",c.target.value),placeholder:"VidCloud"})]})]}),a.link_category==="watch"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-4 p-1 bg-gray-50 dark:bg-gray-900/50 rounded-lg w-fit",children:[e.jsx("button",{type:"button",onClick:()=>b(a.originalIndex,"type","url"),className:`px-3 py-1.5 text-xs font-medium rounded-md ${a.type==="url"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`,children:"Direct URL"}),e.jsx("button",{type:"button",onClick:()=>b(a.originalIndex,"type","embed"),className:`px-3 py-1.5 text-xs font-medium rounded-md ${a.type==="embed"?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`,children:"Embed Code"})]}),a.type==="url"?e.jsx(g,{className:"w-full text-sm font-mono",value:a.url,onChange:c=>b(a.originalIndex,"url",c.target.value)}):e.jsx("textarea",{className:"w-full text-sm font-mono rounded-lg border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-900 text-gray-700 dark:text-gray-300 p-3 focus:border-blue-500 focus:ring-blue-500",rows:"3",value:a.embed_code,onChange:c=>b(a.originalIndex,"embed_code",c.target.value)})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{value:"Download URL"}),e.jsx(g,{className:"w-full text-sm font-mono",value:a.url,onChange:c=>b(a.originalIndex,"url",c.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{value:"Quality"}),e.jsx(g,{className:"w-full text-sm",value:a.quality,onChange:c=>b(a.originalIndex,"quality",c.target.value)})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Format"}),e.jsx(g,{className:"w-full text-sm",value:a.file_format,onChange:c=>b(a.originalIndex,"file_format",c.target.value)})]})]})]})]},a.originalIndex)),e.jsx("button",{type:"button",onClick:()=>B(i,s),className:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl text-sm font-medium text-gray-500 dark:text-gray-400 hover:border-blue-500 hover:text-blue-500 dark:hover:border-blue-400 dark:hover:text-blue-400",children:"+ Add Another Link"})]})]})]},s))})]})]})})};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsxs("form",{onSubmit:F,className:"p-6",children:[p===1&&ce(),p===2&&ge(),p===3&&me(),p===4&&he()]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-800 bg-gray-50 dark:bg-gray-800 flex justify-between items-center sticky bottom-0 z-10",children:[e.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(r=>e.jsx("div",{className:`w-2.5 h-2.5 rounded-full transition-colors ${r===p?"bg-blue-600 dark:bg-blue-500":"bg-gray-300 dark:bg-gray-800"}`},r))}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(f,{onClick:p===1?_:ie,type:"button",disabled:I,children:p===1?"Cancel":"Previous"}),p<4?e.jsx(y,{onClick:ne,children:"Next"}):e.jsx(y,{onClick:F,disabled:I,children:d?"Update Series":"Create Series"})]})]}),e.jsx(ve,{show:K,onClose:()=>k(!1),maxWidth:"2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:"Search TMDB"}),e.jsxs("form",{onSubmit:Z,className:"flex gap-2 mb-4",children:[e.jsx(g,{type:"text",className:"w-full",placeholder:"Search for a series...",value:w,onChange:r=>J(r.target.value)}),e.jsx(y,{type:"submit",disabled:N,children:N?"Searching...":"Search"})]}),e.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[P.map(r=>e.jsxs("div",{className:"flex items-center gap-4 p-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded cursor-pointer border border-gray-200 dark:border-gray-600",onClick:()=>ee(r.id),children:[r.poster_path?e.jsx("img",{src:`https://image.tmdb.org/t/p/w92${r.poster_path}`,alt:r.name,className:"w-12 h-18 object-cover rounded"}):e.jsx("div",{className:"w-12 h-18 bg-gray-200 dark:bg-gray-600 rounded flex items-center justify-center",children:e.jsx("span",{className:"text-xs",children:"No Img"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:r.name}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:r.first_air_date})]})]},r.id)),P.length===0&&!N&&e.jsx("p",{className:"text-center text-gray-500",children:"No results found."})]})]})})]})}export{Ae as default};
