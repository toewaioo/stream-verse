import{r as n,a,j as s}from"./app-n8urw-jD.js";function f({user:c}){const o=n.useRef(!1),[d,g]=n.useState([]),[p,r]=n.useState("Initializing..."),t=(e,i="info")=>{const l=new Date().toLocaleTimeString();g(m=>[...m,{timestamp:l,message:e,type:i}]),console.log(`[${l}] ${e}`)};n.useEffect(()=>{t("TgAuth page mounted");const e=window.Telegram?.WebApp;if(!e){t("Not Telegram Mini App","warning"),r("Not a Telegram Mini App"),setTimeout(()=>a.visit(route("home")),2e3);return}if(e.ready(),t("Mini App detected","success"),c)return t("User already logged in","success"),r("Already logged in! Redirecting..."),setTimeout(()=>{a.visit(route("home"))},1500);if(!e.initData){t("Telegram initData missing!","error"),r("No Telegram data available");return}t("initData detected","success"),o.current||(o.current=!0,r("Authenticating with Telegram..."),t("Sending initData to backend via Inertia...","info"),a.post("/auth/telegram/mini-app",{initData:e.initData},{preserveScroll:!0,onSuccess:i=>{t("Login success!","success"),t(JSON.stringify(i.props),"info"),r("Login successful! Redirecting..."),setTimeout(()=>{a.visit(route("home"))},1200)},onError:i=>{t("Login failed!","error"),t(JSON.stringify(i),"error"),r("Login failed"),o.current=!1}}))},[c]);const u=e=>e==="success"?"text-green-400":e==="error"?"text-red-400":e==="warning"?"text-yellow-400":"text-gray-300";return s.jsx("div",{className:"min-h-screen bg-black text-white flex justify-center p-6",children:s.jsxs("div",{className:"w-full max-w-2xl",children:[s.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[s.jsx("h2",{className:"font-bold mb-2",children:"Developer Logs"}),s.jsx("div",{className:"bg-black p-3 rounded text-sm max-h-80 overflow-y-auto",children:d.map((e,i)=>s.jsxs("div",{className:u(e.type),children:[s.jsxs("span",{className:"text-gray-500 mr-1",children:["[",e.timestamp,"]"]}),e.message]},i))})]}),s.jsx("div",{className:"text-center mt-4",children:s.jsx("button",{onClick:()=>a.visit(route("home")),className:"px-5 py-2 bg-white text-black rounded font-bold",children:"Home"})})]})})}export{f as default};
