import{r as d,R as f,a as n,j as e,H as j}from"./app-pa8R6s_u.js";import{A as v}from"./AdminLayout-Bkwcaqby.js";import{M as w}from"./Modal-DIaj70_q.js";import{P as N}from"./PrimaryButton-DThyh1FW.js";import{T as b}from"./InputError-ZboArTNe.js";import k from"./MovieForm-Bydwv7Zn.js";import"./ApplicationLogo-Rhx6X2l7.js";import"./Dropdown-Bw17NT3M.js";import"./transition--53gIZ3_.js";import"./open-closed-DCLrtwyt.js";import"./portal-Bs4O8tVC.js";import"./InputLabel-CwJ-VUPA.js";import"./SecondaryButton-iqUIb5un.js";import"./Checkbox-BAwlJUH9.js";import"./PersonSelector-C7RbNug4.js";function P({movies:s,genres:c,persons:o,auth:M}){const[m,a]=d.useState(!1),[r,l]=d.useState(null),[i,h]=d.useState("");console.log(s);const g=()=>{l(null),a(!0)},p=t=>{l(t),a(!0)},x=()=>{a(!1),l(null)};f.useEffect(()=>{const t=setTimeout(()=>{n.get(route("admin.movies"),{search:i},{preserveState:!0,replace:!0})},300);return()=>clearTimeout(t)},[i]);const u=t=>{confirm("Are you sure you want to delete this movie?")&&n.delete(route("admin.movies.destroy",t.id))};return e.jsxs(v,{children:[e.jsx(j,{title:"Manage Movies"}),e.jsx("div",{className:"",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Movies"}),e.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[e.jsx("div",{className:"flex-1 md:w-64",children:e.jsx(b,{type:"text",placeholder:"Search movies...",className:"w-full",value:i,onChange:t=>h(t.target.value)})}),e.jsxs(N,{onClick:g,children:[e.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Movie"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Movie"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Release Info"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Stats"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:s.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-16 w-12 bg-gray-200 rounded overflow-hidden",children:t.poster_url?e.jsx("img",{className:"h-16 w-12 object-cover",src:t.poster_url,alt:""}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400 text-xs",children:"N/A"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.original_title})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.jsx("div",{className:"text-sm text-gray-900 dark:text-gray-300",children:t.release_date?new Date(t.release_date).getFullYear():"N/A"}),e.jsx("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.runtime?`${Math.floor(t.runtime/60)}h ${t.runtime%60}m`:""})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full w-fit ${t.status==="released"?"bg-green-100 text-green-800":t.status==="upcoming"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:t.status}),t.is_vip_only&&e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800 w-fit",children:"VIP Only"})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),t.rating_average||"0.0"]}),e.jsxs("div",{className:"text-xs mt-1",children:[t.view_count?.toLocaleString()," ","views"]})]}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>p(t),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>u(t),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})]},t.id))})]})}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("div",{className:"flex gap-1 flex-wrap",children:s.links.map((t,y)=>e.jsx("button",{onClick:()=>{t.url&&n.visit(t.url,{preserveState:!0,preserveScroll:!0})},disabled:!t.url,className:`px-4 py-2 text-sm rounded-md ${t.active?"bg-indigo-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"} ${!t.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},y))})})]})})})}),e.jsx(w,{show:m,onClose:x,maxWidth:"5xl",children:e.jsxs("div",{className:"p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:r?`Edit Movie: ${r.title}`:"Create New Movie"}),e.jsx(k,{movie:r,genres:c||[],persons:o||[],onClose:x,onSuccess:()=>{}})]})})]})}export{P as default};
