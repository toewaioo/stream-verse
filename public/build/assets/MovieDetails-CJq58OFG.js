import{u as E,r as d,j as e,L as T,c as f}from"./app-D1xBa9XH.js";import{R as _,a as $,b as B}from"./ReviewForm-CrQbmJDU.js";import{S as P}from"./SeoHead-DTcCwuMQ.js";import{F as O}from"./Footer-DQdiV2wR.js";import{u as S}from"./useTranslation-Cui_AhUm.js";const R=({className:r="w-6 h-6"})=>e.jsx("svg",{className:r,fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M8 5v14l11-7z"})}),C=({link:r,type:l,isVip:i})=>{const{t:o}=S(),u=r.is_vip_only&&!i,[p,c]=d.useState(!1);return e.jsxs("div",{className:`group flex items-center justify-between py-4 border-b border-white/10 hover:bg-white/5 transition-colors px-2 ${u?"opacity-50":""}`,children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("div",{className:"flex flex-col",children:e.jsx("span",{className:"dark:text-white font-serif text-lg leading-none",children:r.server_name})})}),e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-[10px] font-bold border ${l==="download"?"border-blue-500 text-blue-500":"border-red-500 text-red-500"}`,children:r.quality?.replace("p","")||"HD"}),e.jsx("div",{className:"flex items-center gap-3",children:u?e.jsx("span",{className:"text-xs font-bold text-yellow-500 border border-yellow-500 px-2 py-1 uppercase tracking-widest",children:o("VIP")}):e.jsx("a",{href:r.url,target:"_blank",rel:"noopener noreferrer",className:`w-10 h-10 rounded-full flex items-center justify-center transition-all ${l==="download"?"bg-blue-600 hover:bg-blue-500 text-white":"bg-red-600 hover:bg-red-500 text-white"}`,children:e.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})},A=({url:r,onClose:l})=>{if(!r)return null;const i=r.match(/(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/)?.[1],o=i?`https://www.youtube.com/embed/${i}?autoplay=1`:null;return o?e.jsxs("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/95 p-4 md:p-12 animate-fade-in",onClick:l,children:[e.jsx("button",{onClick:l,className:"absolute top-6 right-6 text-white/50 hover:text-white transition-colors",children:e.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M6 18L18 6M6 6l12 12"})})}),e.jsx("div",{className:"w-full max-w-6xl aspect-video bg-black shadow-2xl",children:e.jsx("iframe",{src:o,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0})})]}):null};function G({movie:r,watchLinksByQuality:l,downloadLinksByQuality:i,relatedMovies:o,userRating:u,isVip:p,seo:c}){const{t:a}=S(),{auth:m}=E().props,[t,j]=d.useState(r),[g,M]=d.useState(u),[F,w]=d.useState(!1),[N,v]=d.useState(null),[y,L]=d.useState(!1);d.useEffect(()=>{const s=window.Telegram?.WebApp;if(s)return s.BackButton.show(),s.onEvent("backButtonClicked",()=>window.history.back()),()=>{s.BackButton.hide(),s.BackButton.offClick()}},[]);const D=async s=>{const n=g?route("api.ratings.update",g.id):route("api.ratings.store"),h=g?"put":"post";try{const x=await f[h](n,{rating:s,movie_id:t.id}),{rating:b,content:z}=x.data;M(b),j(z)}catch(x){console.error("Failed to submit rating:",x)}},k=async s=>{const n=s.id?route("api.reviews.update",s.id):route("api.movies.reviews.store",t.id),h=s.id?"put":"post";try{const x=await f[h](n,s),{content:b}=x.data;j(b),v(null)}catch(x){console.error("Failed to submit review:",x)}},I=async s=>{try{const n=await f.delete(route("api.reviews.destroy",s)),{content:h}=n.data;j(h)}catch(n){console.error("Failed to delete review:",n)}},W=()=>{document.getElementById("watch-section")?.scrollIntoView({behavior:"smooth"})};return d.useEffect(()=>{const s=t?.reviews?.some(n=>n.user?.id===m.user?.id);L(s)},[t]),e.jsxs(e.Fragment,{children:[e.jsx(P,{title:c?.title,description:c?.description,keywords:c?.keywords,url:c?.url,image:c?.image,type:c?.type,structuredData:c?.structuredData}),e.jsxs("div",{className:"min-h-screen bg-gray-50 dark:bg-[#0a0e17] text-gray-900 dark:text-gray-100 font-sans selection:bg-blue-500 selection:text-white transition-colors duration-300",children:[e.jsxs("div",{className:"relative w-full min-h-[85vh] md:min-h-[100vh] flex items-end pb-12 md:pb-24 overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 z-0",children:[e.jsx("img",{src:t.banner_url,alt:t.title,className:"hidden md:block w-full h-full object-cover"}),e.jsx("img",{src:t.poster_url,alt:t.title,className:"block md:hidden w-full h-full object-cover"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-gray-50 dark:from-[#0a0e17] via-gray-50/60 dark:via-[#0a0e17]/60 to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-50 dark:from-[#0a0e17] via-gray-50/40 dark:via-[#0a0e17]/40 to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-white/10 dark:bg-black/20"})]}),e.jsx("div",{className:"relative z-10 container-custom w-full",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-8 md:gap-12 items-start md:items-end",children:[e.jsx("div",{className:"hidden md:block w-64 lg:w-72 flex-shrink-0 rounded-xl overflow-hidden shadow-[0_0_50px_rgba(0,0,0,0.2)] dark:shadow-[0_0_50px_rgba(0,0,0,0.5)] border border-gray-200 dark:border-white/10 transform hover:scale-105 transition-transform duration-500",children:e.jsx("img",{src:t.poster_url,alt:t.title,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"flex-1 w-full text-center md:text-left",children:[e.jsxs("div",{className:"mb-4 animate-slide-up",style:{animationDelay:"0.1s"},children:[e.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold text-gray-900 dark:text-white mb-2 font-serif leading-tight drop-shadow-lg",children:t.title}),t.original_title&&e.jsx("p",{className:"text-lg md:text-xl text-gray-500 dark:text-gray-400 font-serif italic",children:t.original_title})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center md:justify-start gap-4 md:gap-6 mb-8 text-sm md:text-base font-medium text-gray-600 dark:text-gray-300 animate-slide-up",style:{animationDelay:"0.2s"},children:[t.rating_average>0&&e.jsxs("div",{className:"flex items-center gap-1 text-yellow-500 dark:text-yellow-400",children:[e.jsx("span",{children:"★"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:t.rating_average})]}),e.jsx("span",{children:new Date(t.release_date).getFullYear()}),e.jsx("span",{className:"px-2 py-0.5 border border-gray-300 dark:border-white/20 rounded text-xs uppercase tracking-wider bg-gray-200 dark:bg-white/5",children:t.age_rating||"PG-13"}),e.jsx("span",{children:t.formatted_runtime}),t.country&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"hidden md:inline",children:"•"}),e.jsx("span",{children:t.country})]}),t.view_count>0&&e.jsxs("div",{className:"flex items-center gap-1 text-gray-500 dark:text-gray-400 text-xs",children:[e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsx("span",{children:t.view_count})]})]}),e.jsx("div",{className:"flex flex-wrap justify-center md:justify-start gap-2 mb-8 animate-slide-up",style:{animationDelay:"0.3s"},children:t.genres?.map(s=>e.jsx("span",{className:"genre-pill",children:s.name},s.id))}),e.jsxs("div",{className:"flex flex-wrap justify-center md:justify-start gap-4 animate-slide-up",style:{animationDelay:"0.4s"},children:[e.jsxs("button",{onClick:W,className:"btn-primary group",children:[e.jsx(R,{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform"}),a("Watch Now")]}),t.trailer_url&&e.jsxs("button",{onClick:()=>w(!0),className:"btn-secondary group",children:[e.jsxs("svg",{className:"w-5 h-5 mr-2 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.752 11.168l-3.197-2.132A1 1 0 0010 9.87v4.263a1 1 0 001.555.832l3.197-2.132a1 1 0 000-1.664z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]}),a("Trailer")]})]})]})]})})]}),e.jsx("div",{className:"container-custom py-12 md:py-20",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-12",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"mb-16",children:[e.jsxs("h3",{className:"text-sm font-bold text-blue-500 uppercase tracking-widest mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-[2px] bg-blue-500"}),a("Synopsis")]}),e.jsx("p",{className:"text-lg md:text-xl text-gray-600 dark:text-gray-300 font-serif leading-relaxed opacity-90",children:t.description})]}),e.jsx("div",{id:"watch-section",className:"mb-16 scroll-mt-24",children:e.jsxs("div",{className:"glass-card-adaptive p-6 md:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("h3",{className:"text-xl font-serif text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(R,{className:"w-6 h-6 text-blue-500"}),a("Watch & Download")]}),t.is_vip_only&&e.jsx("span",{className:"badge-vip",children:a("VIP ACCESS")})]}),m.user?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:`${l&&Object.keys(l).length>0?"":"hidden"}`,children:[e.jsx("h4",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest mb-4",children:a("Streaming Sources")}),e.jsx("div",{className:"grid gap-2",children:l&&Object.keys(l).length>0?Object.values(l).flat().map(s=>e.jsx(C,{link:s,type:"watch",isVip:p},s.id)):e.jsx("div",{className:"text-gray-500 italic",children:a("No streaming links available.")})})]}),e.jsxs("div",{className:`${i&&Object.keys(i).length>0?"":"hidden"}`,children:[e.jsx("h4",{className:"text-sm font-bold text-gray-500 uppercase tracking-widest mb-4",children:a("Download Files")}),e.jsx("div",{className:"grid gap-2",children:i&&Object.keys(i).length>0?Object.values(i).flat().map(s=>e.jsx(C,{link:s,type:"download",isVip:p},s.id)):e.jsx("div",{className:"text-gray-500 italic",children:a("No download links available.")})})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-400 mb-6",children:a("Please log in to access streaming and download links.")}),e.jsx("a",{href:route("login"),className:"btn-primary",children:a("Log In to Watch")})]})]})}),e.jsxs("div",{className:"mb-16",children:[e.jsxs("h3",{className:"text-sm font-bold text-blue-500 uppercase tracking-widest mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-[2px] bg-blue-500"}),a("Cast & Crew")]}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-4 gap-6",children:t.actors?.slice(0,8).map(s=>e.jsxs(T,{href:route("person.show",s.person?.id),className:"group block",children:[e.jsx("div",{className:"aspect-[3/4] rounded-lg overflow-hidden mb-3 bg-gray-200 dark:bg-gray-800",children:e.jsx("img",{src:s.person?.avatar_url||"/images/placeholder-avatar.jpg",alt:s.person?.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"})}),e.jsx("h4",{className:"text-gray-900 dark:text-white font-medium truncate group-hover:text-blue-400 transition-colors",children:s.person?.name}),e.jsx("p",{className:"text-sm text-gray-500 truncate",children:s.character_name})]},s.id))})]}),e.jsxs("div",{className:"mb-16",children:[e.jsxs("h3",{className:"text-sm font-bold text-blue-500 uppercase tracking-widest mb-6 flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-[2px] bg-blue-500"}),a("Reviews")]}),m.user&&!y&&e.jsx(_,{content:t,contentType:"movie",onSuccess:k}),m.user&&y&&!N&&e.jsx("div",{className:"glass-card-adaptive p-6 text-center",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:"You have already reviewed this movie."})}),!m.user&&e.jsxs("div",{className:"glass-card-adaptive p-8 text-center",children:[e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6 font-medium",children:a("Please log in to write a review.")}),e.jsx("a",{href:route("login"),className:"btn-primary inline-flex",children:a("Log In to Review")})]}),e.jsx("div",{className:"mt-8 space-y-4",children:t?.reviews?.length>0?t.reviews.map(s=>N===s.id?e.jsx(_,{content:t,contentType:"movie",review:s,onSuccess:k,onCancel:()=>v(null)},`editing-${s.id}`):e.jsx($,{review:s,onEdit:()=>v(s.id),onDelete:()=>I(s.id)},s.id)):e.jsx("p",{className:"text-gray-500 italic text-center py-8",children:a("No reviews yet.")})})]}),e.jsxs("div",{className:"w-full",children:[e.jsx("h1",{children:a("Backdrop")}),e.jsx("img",{className:"w-full rounded-lg mt-8",src:t.banner_url,alt:`${t.title} Backdrop`})]})]}),e.jsxs("div",{className:"w-full lg:w-80 flex-shrink-0 space-y-12",children:[e.jsxs("div",{className:"glass-card-adaptive p-6",children:[e.jsx("h3",{className:"text-sm font-bold text-gray-500 dark:text-gray-400 uppercase tracking-widest mb-4 text-center",children:a("Rate this Movie")}),m.user?e.jsx(B,{ratingAverage:t.rating_average||0,ratingCount:t.rating_count||0,userRating:g,onRate:D}):e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsx("a",{href:route("login"),className:"text-blue-400 hover:underline",children:a("Log in")})," ",a("to rate.")]})]}),o&&o.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-bold text-gray-900 dark:text-white uppercase tracking-widest mb-6 border-l-4 border-blue-500 pl-3",children:a("You May Also Like")}),e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-2 gap-4",children:o.slice(0,6).map(s=>e.jsxs("a",{href:route("movies.show",s.slug),className:"group block",children:[e.jsxs("div",{className:"aspect-[2/3] rounded-lg overflow-hidden mb-2 relative",children:[e.jsx("img",{src:s.poster_url,alt:s.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors"})]}),e.jsx("h4",{className:"text-sm text-gray-600 dark:text-gray-300 font-medium truncate group-hover:text-blue-600 dark:group-hover:text-white transition-colors",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{children:new Date(s.release_date).getFullYear()}),e.jsxs("span",{className:"text-yellow-500",children:["★"," ",s.rating_average]})]})]},s.id))})]})]})]})}),e.jsx(O,{})]}),F&&e.jsx(A,{url:t.trailer_url,onClose:()=>w(!1)})]})}export{G as default};
