import{r as u,u as Z,j as e}from"./app-CrR_p_xd.js";import{u as ee}from"./useFormPersistence-BDPisBi1.js";import{I as n}from"./InputLabel-DNaFWLKq.js";import{T as g,I as x}from"./InputError-C7TucAb2.js";import{P as v}from"./PrimaryButton-2tJtjbKU.js";import{S as f}from"./SecondaryButton-BFMhtP44.js";import{C as I}from"./Checkbox-FI_5IwyU.js";import{P as re}from"./PersonSelector-BwgD4Yg2.js";import"./portal-Bq_1YNBN.js";import"./open-closed-Co27wNer.js";function be({series:o,genres:A=[],persons:F=[],onClose:_,onSuccess:k}){const[b,N]=u.useState(1),B=()=>{if(!o?.seasons)return[];const r=[];return o.seasons.forEach(s=>{s.episodes?.forEach(t=>{t.watch_links?.forEach(a=>{r.push({id:a.id,season_number:s.season_number,episode_number:t.episode_number,link_category:"watch",server_name:a.server_name,quality:a.quality,type:a.type||(a.embed_code?"embed":"url"),url:a.url||"",embed_code:a.embed_code||"",is_vip_only:!!a.is_vip_only,file_size:"",file_format:""})}),t.download_links?.forEach(a=>{r.push({id:a.id,season_number:s.season_number,episode_number:t.episode_number,link_category:"download",server_name:a.server_name,quality:a.quality,type:"url",url:a.url||"",embed_code:"",is_vip_only:!!a.is_vip_only,file_size:a.file_size||"",file_format:a.file_format||""})})})}),r},{data:l,setData:d,post:T,put:$,processing:w,errors:m}=Z({title:o?.title||"",slug:o?.slug||"",original_title:o?.original_title||"",description:o?.description||"",release_year_start:o?.release_year_start||"",release_year_end:o?.release_year_end||"",status:o?.status||"ongoing",language:o?.language||"en",country:o?.country||"",age_rating:o?.age_rating||"",is_vip_only:o?.is_vip_only||!1,poster_url:o?.poster_url||"",banner_url:o?.banner_url||"",trailer_url:o?.trailer_url||"",imdb_id:o?.imdb_id||"",genres:o?.genres?.map(r=>r.id)||[],persons:o?.persons?.map(r=>({person_id:r.person_id,role_type:r.role_type,character_name:r.character_name}))||[],episode_links:B()}),V=o?.id?`series_form_update_${o.id}`:"series_form_create",{clearStorage:G}=ee(V,l,d),[R,C]=u.useState("");u.useEffect(()=>{if(l.title&&!o?.id){const r=l.title.toLowerCase().replace(/ /g,"-").replace(/[^\w-]+/g,"");d("slug",r)}},[l.title]),u.useEffect(()=>{const r=async()=>{if(l.slug)try{(await axios.get(route("admin.series.check-slug"),{params:{slug:l.slug,id:o?.id}})).data.exists?C("This slug is already taken."):C("")}catch(t){console.error("Error checking slug:",t)}},s=setTimeout(()=>{r()},500);return()=>clearTimeout(s)},[l.slug,o?.id]);const D=r=>{const s=l.genres;s.includes(r)?d("genres",s.filter(t=>t!==r)):d("genres",[...s,r])},W=()=>{d("persons",[...l.persons,{person_id:"",role_type:"actor",character_name:""}])},O=r=>{const s=[...l.persons];s.splice(r,1),d("persons",s)},j=(r,s,t)=>{const a=[...l.persons];a[r][s]=t,d("persons",a)},h=u.useMemo(()=>{const r={};return l.episode_links.forEach((s,t)=>{const a=s.season_number||0,c=s.episode_number||0;r[a]||(r[a]={}),r[a][c]||(r[a][c]=[]),r[a][c].push({...s,originalIndex:t})}),r},[l.episode_links]),[ae,q]=u.useState({}),[S,E]=u.useState({}),z=(r,s)=>E(t=>({...t,[`${r}-${s}`]:!t[`${r}-${s}`]})),L=(r,s)=>{d("episode_links",[...l.episode_links,{season_number:r,episode_number:s,link_category:"watch",server_name:"",url:"",embed_code:"",quality:"HD",type:"url",file_format:"MKV",file_size:"",is_vip_only:!1}]),q(t=>({...t,[r]:!0})),E(t=>({...t,[`${r}-${s}`]:!0}))},H=r=>{const s=[...l.episode_links];s.splice(r,1),d("episode_links",s)},p=(r,s,t)=>{const a=[...l.episode_links];a[r][s]=t,d("episode_links",a)},[se,te]=u.useState(""),[le,oe]=u.useState(""),M=r=>{r.preventDefault();const s={onSuccess:()=>{G(),k&&k(),_&&_()}};o&&o.id?$(route("admin.series.update",o.id),s):T(route("admin.series.store"),s)},U=()=>N(r=>Math.min(r+1,3)),K=()=>N(r=>Math.max(r-1,1)),Y=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Basic Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(n,{htmlFor:"title",value:"Series Title"}),e.jsx(g,{id:"title",type:"text",className:"mt-1 block w-full",value:l.title,onChange:r=>d("title",r.target.value),required:!0,placeholder:"e.g. Breaking Bad"}),e.jsx(x,{message:m.title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"original_title",value:"Original Title"}),e.jsx(g,{id:"original_title",type:"text",className:"mt-1 block w-full",value:l.original_title,onChange:r=>d("original_title",r.target.value),placeholder:"Original language title"}),e.jsx(x,{message:m.original_title,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"slug",value:"Slug"}),e.jsx(g,{id:"slug",type:"text",className:"mt-1 block w-full",value:l.slug,onChange:r=>d("slug",r.target.value),placeholder:"e.g. breaking-bad"}),e.jsx(x,{message:m.slug||R,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"imdb_id",value:"IMDb ID"}),e.jsx(g,{id:"imdb_id",type:"text",className:"mt-1 block w-full",value:l.imdb_id,onChange:r=>d("imdb_id",r.target.value),placeholder:"tt0903747"}),e.jsx(x,{message:m.imdb_id,className:"mt-2"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(n,{htmlFor:"description",value:"Synopsis"}),e.jsx("textarea",{id:"description",className:"mt-1 block w-full text-black border-gray-300 dark:border-gray-300 dark:bg-gray-300 dark:text-gray-500 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",rows:"4",value:l.description,onChange:r=>d("description",r.target.value),placeholder:"Enter a detailed description of the series..."}),e.jsx(x,{message:m.description,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Details & Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"status",value:"Status"}),e.jsxs("select",{id:"status",className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:l.status,onChange:r=>d("status",r.target.value),children:[e.jsx("option",{value:"ongoing",children:"Ongoing"}),e.jsx("option",{value:"ended",children:"Ended"}),e.jsx("option",{value:"canceled",children:"Canceled"})]}),e.jsx(x,{message:m.status,className:"mt-2"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"release_year_start",value:"Start Year"}),e.jsx(g,{id:"release_year_start",type:"number",className:"mt-1 block w-full",value:l.release_year_start,onChange:r=>d("release_year_start",r.target.value),placeholder:"2008"}),e.jsx(x,{message:m.release_year_start,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"release_year_end",value:"End Year"}),e.jsx(g,{id:"release_year_end",type:"number",className:"mt-1 block w-full",value:l.release_year_end,onChange:r=>d("release_year_end",r.target.value),placeholder:"2013"}),e.jsx(x,{message:m.release_year_end,className:"mt-2"})]})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"language",value:"Language"}),e.jsx(g,{id:"language",type:"text",className:"mt-1 block w-full",value:l.language,onChange:r=>d("language",r.target.value),placeholder:"en"}),e.jsx(x,{message:m.language,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"country",value:"Country"}),e.jsx(g,{id:"country",type:"text",className:"mt-1 block w-full",value:l.country,onChange:r=>d("country",r.target.value),placeholder:"USA"}),e.jsx(x,{message:m.country,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"age_rating",value:"Age Rating"}),e.jsxs("select",{id:"age_rating",className:"mt-1 block w-full border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:l.age_rating,onChange:r=>d("age_rating",r.target.value),children:[e.jsx("option",{value:"",children:"Select Rating"}),e.jsx("option",{value:"G",children:"G - General Audiences"}),e.jsx("option",{value:"PG",children:"PG - Parental Guidance"}),e.jsx("option",{value:"PG-13",children:"PG-13"}),e.jsx("option",{value:"TV-14",children:"TV-14"}),e.jsx("option",{value:"TV-MA",children:"TV-MA - Mature"}),e.jsx("option",{value:"R",children:"R - Restricted"})]}),e.jsx(x,{message:m.age_rating,className:"mt-2"})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors cursor-pointer",children:[e.jsx(I,{name:"is_vip_only",checked:l.is_vip_only,onChange:r=>d("is_vip_only",r.target.checked)}),e.jsxs("div",{className:"ml-3",children:[e.jsx("span",{className:"block text-sm font-medium text-gray-900 dark:text-gray-100",children:"VIP Exclusive"}),e.jsx("span",{className:"block text-xs text-gray-500 dark:text-gray-400",children:"Only accessible to VIP members"})]})]})})]})]})]}),Q=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Media Assets"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{htmlFor:"poster_url",value:"Poster URL"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(g,{id:"poster_url",type:"url",className:"mt-1 block w-full",value:l.poster_url,onChange:r=>d("poster_url",r.target.value),placeholder:"https://..."}),l.poster_url&&e.jsx("div",{className:"flex-shrink-0 h-10 w-8 bg-gray-100 rounded overflow-hidden border border-gray-200",children:e.jsx("img",{src:l.poster_url,alt:"Preview",className:"w-full h-full object-cover"})})]}),e.jsx(x,{message:m.poster_url,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"banner_url",value:"Banner/Backdrop URL"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(g,{id:"banner_url",type:"url",className:"mt-1 block w-full",value:l.banner_url,onChange:r=>d("banner_url",r.target.value),placeholder:"https://..."}),l.banner_url&&e.jsx("div",{className:"flex-shrink-0 h-10 w-16 bg-gray-100 rounded overflow-hidden border border-gray-200",children:e.jsx("img",{src:l.banner_url,alt:"Preview",className:"w-full h-full object-cover"})})]}),e.jsx(x,{message:m.banner_url,className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(n,{htmlFor:"trailer_url",value:"Trailer URL (YouTube/Embed)"}),e.jsx(g,{id:"trailer_url",type:"url",className:"mt-1 block w-full",value:l.trailer_url,onChange:r=>d("trailer_url",r.target.value),placeholder:"https://youtube.com/..."}),e.jsx(x,{message:m.trailer_url,className:"mt-2"})]})]})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white mb-4",children:"Genres"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:A.map(r=>e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx(I,{checked:l.genres.includes(r.id),onChange:()=>D(r.id)}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:r.name})]},r.id))}),e.jsx(x,{message:m.genres,className:"mt-2"})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 sm:p-6 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Cast & Crew"}),e.jsx(f,{onClick:W,type:"button",size:"sm",children:"+ Add Person"})]}),e.jsx("div",{className:"space-y-4",children:l.persons.map((r,s)=>e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 items-start border-b border-gray-100 dark:border-gray-700 pb-4 last:border-0",children:[e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx(n,{value:"Person"}),e.jsx(re,{value:r.person_id,onChange:t=>j(s,"person_id",t),persons:F})]}),e.jsxs("div",{className:"w-full md:w-1/4",children:[e.jsx(n,{value:"Role"}),e.jsxs("select",{className:"mt-1 block w-full text-gray-500 border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm",value:r.role_type,onChange:t=>j(s,"role_type",t.target.value),children:[e.jsx("option",{value:"actor",children:"Actor"}),e.jsx("option",{value:"director",children:"Director"}),e.jsx("option",{value:"writer",children:"Writer"}),e.jsx("option",{value:"producer",children:"Producer"})]})]}),r.role_type==="actor"&&e.jsxs("div",{className:"flex-1 w-full",children:[e.jsx(n,{value:"Character Name"}),e.jsx(g,{className:"mt-1 block w-full",value:r.character_name,onChange:t=>j(s,"character_name",t.target.value),placeholder:"e.g. Walter White"})]}),e.jsx("div",{className:"mt-6",children:e.jsx("button",{type:"button",onClick:()=>O(s),className:"text-red-500 hover:text-red-700",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},s))}),l.persons.length===0&&e.jsx("p",{className:"text-sm text-gray-500 text-center py-4",children:"No cast or crew added yet."})]})]}),[i,y]=u.useState(1);u.useEffect(()=>{const r=Object.keys(h).map(Number).sort((s,t)=>s-t);r.length>0&&!r.includes(i)?y(r[0]):r.length===0&&y(1)},[h]);const J=()=>{const r=Object.keys(h).map(Number),s=r.length>0?Math.max(...r)+1:1;y(s)},P=()=>{const r=h[i]?Object.keys(h[i]).map(Number):[],s=r.length>0?Math.max(...r)+1:1;L(i,s)},X=()=>{const r=Object.keys(h).map(Number).sort((t,a)=>t-a),s=h[i]?Object.keys(h[i]).map(Number).sort((t,a)=>t-a):[];return e.jsxs("div",{className:"space-y-6 pb-20",children:[" ",e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-2xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-gray-100 dark:border-gray-700 flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"Episode Manager"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"Manage seasons, episodes, and streaming links."})]}),e.jsx(f,{onClick:J,className:"w-full sm:w-auto justify-center",children:"+ Add Season"})]}),e.jsx("div",{className:"p-4 bg-gray-50 dark:bg-gray-900/50 border-b border-gray-100 dark:border-gray-700",children:e.jsxs("div",{className:"flex overflow-x-auto gap-3 pb-2 custom-scrollbar snap-x",children:[r.map(t=>e.jsxs("button",{type:"button",onClick:()=>y(t),className:`flex-shrink-0 snap-start px-6 py-2.5 rounded-xl text-sm font-semibold transition-all duration-200 ${i===t?"bg-indigo-600 text-white shadow-lg shadow-indigo-500/30 ring-2 ring-indigo-600 ring-offset-2 ring-offset-gray-50 dark:ring-offset-gray-900":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border border-gray-200 dark:border-gray-700 hover:border-indigo-300 dark:hover:border-indigo-700"}`,children:["Season ",t]},t)),!r.includes(i)&&e.jsxs("button",{type:"button",className:"flex-shrink-0 px-6 py-2.5 rounded-xl text-sm font-semibold bg-indigo-600 text-white shadow-lg shadow-indigo-500/30",children:["Season ",i," (New)"]})]})}),e.jsxs("div",{className:"p-4 sm:p-6 bg-gray-50/50 dark:bg-gray-900/20 min-h-[400px]",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4 mb-6",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 dark:text-gray-200",children:["Season ",i," ",e.jsxs("span",{className:"text-gray-400 font-normal text-sm ml-2",children:["(",s.length," Episodes)"]})]}),e.jsxs(v,{onClick:P,type:"button",className:"w-full sm:w-auto justify-center",children:["+ Add Episode ",s.length>0?Math.max(...s)+1:1]})]}),s.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center rounded-2xl border-2 border-dashed border-gray-200 dark:border-gray-700 bg-white dark:bg-gray-800/50",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 dark:bg-gray-700 rounded-full flex items-center justify-center mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),e.jsx("h5",{className:"text-lg font-medium text-gray-900 dark:text-white mb-2",children:"No episodes yet"}),e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mb-6 max-w-xs mx-auto",children:["Get started by adding the first episode to Season ",i,"."]}),e.jsx(v,{onClick:P,type:"button",children:"Create Episode 1"})]}):e.jsx("div",{className:"space-y-4",children:s.map(t=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-200 dark:border-gray-700 overflow-hidden transition-all duration-200 hover:shadow-md",children:[e.jsxs("div",{className:"p-4 flex items-center justify-between cursor-pointer active:bg-gray-50 dark:active:bg-gray-700/50 touch-manipulation",onClick:()=>z(i,t),children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-indigo-50 dark:bg-indigo-900/30 flex items-center justify-center text-indigo-600 dark:text-indigo-400 font-bold text-base",children:t}),e.jsxs("div",{children:[e.jsxs("h5",{className:"font-semibold text-gray-900 dark:text-white",children:["Episode ",t]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[h[i][t].length," Links"]})]})]}),e.jsx("div",{className:`p-2 rounded-full bg-gray-50 dark:bg-gray-700/50 text-gray-400 transition-transform duration-200 ${S[`${i}-${t}`]?"rotate-180 bg-indigo-50 text-indigo-500":""}`,children:e.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),S[`${i}-${t}`]&&e.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/30 p-4 space-y-4",children:[h[i][t].map(a=>e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200 dark:border-gray-700 shadow-sm relative group",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`px-2.5 py-1 rounded-md text-xs font-medium ${a.link_category==="watch"?"bg-blue-50 text-blue-600 dark:bg-blue-900/30 dark:text-blue-400":"bg-green-50 text-green-600 dark:bg-green-900/30 dark:text-green-400"}`,children:a.link_category==="watch"?"Stream":"Download"}),a.server_name&&e.jsx("span",{className:"text-xs font-medium text-gray-500 dark:text-gray-400 bg-gray-100 dark:bg-gray-700 px-2 py-1 rounded-md",children:a.server_name})]}),e.jsx("button",{type:"button",onClick:()=>H(a.originalIndex),className:"p-2 -mr-2 -mt-2 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{value:"Category",className:"text-xs mb-1.5"}),e.jsxs("select",{className:"w-full text-sm rounded-xl border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-indigo-500 focus:border-indigo-500 py-2.5",value:a.link_category,onChange:c=>p(a.originalIndex,"link_category",c.target.value),children:[e.jsx("option",{value:"watch",children:"Stream"}),e.jsx("option",{value:"download",children:"Download"})]})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Server Name",className:"text-xs mb-1.5"}),e.jsx(g,{className:"w-full text-sm py-2.5",value:a.server_name,onChange:c=>p(a.originalIndex,"server_name",c.target.value),placeholder:"e.g. VidCloud"})]})]}),a.link_category==="watch"?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex gap-4 p-1 bg-gray-50 dark:bg-gray-900/50 rounded-lg w-fit",children:[e.jsx("button",{type:"button",onClick:()=>p(a.originalIndex,"type","url"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${a.type==="url"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:"Direct URL"}),e.jsx("button",{type:"button",onClick:()=>p(a.originalIndex,"type","embed"),className:`px-3 py-1.5 text-xs font-medium rounded-md transition-all ${a.type==="embed"?"bg-white dark:bg-gray-700 text-indigo-600 dark:text-indigo-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700"}`,children:"Embed Code"})]}),a.type==="url"?e.jsx(g,{className:"w-full text-sm font-mono py-2.5",value:a.url,onChange:c=>p(a.originalIndex,"url",c.target.value),placeholder:"https://example.com/video.mp4"}):e.jsx("textarea",{className:"w-full text-sm font-mono rounded-xl border-gray-300 dark:border-gray-600 dark:bg-gray-700 dark:text-white focus:ring-indigo-500 focus:border-indigo-500 p-3",rows:"3",value:a.embed_code,onChange:c=>p(a.originalIndex,"embed_code",c.target.value),placeholder:"<iframe src='...'></iframe>"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(n,{value:"Download URL",className:"text-xs mb-1.5"}),e.jsx(g,{className:"w-full text-sm font-mono py-2.5",value:a.url,onChange:c=>p(a.originalIndex,"url",c.target.value),placeholder:"https://..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(n,{value:"Quality",className:"text-xs mb-1.5"}),e.jsx(g,{className:"w-full text-sm py-2.5",value:a.quality,onChange:c=>p(a.originalIndex,"quality",c.target.value),placeholder:"1080p"})]}),e.jsxs("div",{children:[e.jsx(n,{value:"Format",className:"text-xs mb-1.5"}),e.jsx(g,{className:"w-full text-sm py-2.5",value:a.file_format,onChange:c=>p(a.originalIndex,"file_format",c.target.value),placeholder:"MKV"})]})]})]})]})]},a.originalIndex)),e.jsxs("button",{type:"button",onClick:()=>L(i,t),className:"w-full py-3 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-xl text-sm font-medium text-gray-500 dark:text-gray-400 hover:border-indigo-500 hover:text-indigo-500 dark:hover:border-indigo-400 dark:hover:text-indigo-400 transition-all bg-white dark:bg-gray-800/50 flex items-center justify-center gap-2",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Another Link"]})]})]},t))})]})]})]})};return e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsxs("form",{onSubmit:M,className:"p-6",children:[b===1&&Y(),b===2&&Q(),b===3&&X()]})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 flex justify-between items-center sticky bottom-0 z-10",children:[e.jsx("div",{className:"flex gap-2",children:[1,2,3].map(r=>e.jsx("div",{className:`w-2.5 h-2.5 rounded-full transition-colors ${r===b?"bg-indigo-600":"bg-gray-300 dark:bg-gray-600"}`},r))}),e.jsxs("div",{className:"flex gap-3",children:[b>1&&e.jsx(f,{onClick:K,disabled:w,children:"Back"}),b<3?e.jsx(v,{onClick:U,children:"Next"}):e.jsx(v,{onClick:M,disabled:w,children:o?"Update Series":"Create Series"})]})]})]})}export{be as default};
