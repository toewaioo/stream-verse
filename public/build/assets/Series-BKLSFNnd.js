import{r as s,a as o,j as e,H as v}from"./app-yhAEO28P.js";import{A as w}from"./AdminLayout--C4buC-e.js";import{M as N}from"./Modal-C2q427wD.js";import{P as b}from"./PrimaryButton-B-Z_S53H.js";import k from"./SeriesForm-Bv1A09yY.js";import{l as S}from"./lodash-Qs-gqJ1t.js";import"./transition-BWU1oAAg.js";import"./useFormPersistence-CkxLMWlG.js";import"./InputLabel-BE3zB_nI.js";import"./InputError-U3I_YCS5.js";import"./SecondaryButton-Di4SCzaV.js";import"./Checkbox-C0_DLo6C.js";import"./PersonSelector-CLFYR67Y.js";function R({series:n,genres:m,persons:g,auth:C}){const[u,d]=s.useState(!1),[i,l]=s.useState(null),[a,h]=s.useState(""),c=s.useRef(!0),p=S.debounce(t=>{o.get(route("admin.series"),{search:a},{preserveState:!0,replace:!0})});s.useEffect(()=>{if(c.current){c.current=!1;return}p(a)},[a]);const y=()=>{l(null),d(!0)},f=async t=>{try{const r=await axios.get(route("admin.series.show",t.id));l(r.data),d(!0)}catch(r){console.error("Failed to fetch series details",r)}},x=()=>{d(!1),l(null)},j=t=>{confirm("Are you sure you want to delete this series?")&&o.delete(route("admin.series.destroy",t))};return e.jsxs(w,{children:[e.jsx(v,{title:"Manage Series"}),e.jsx("div",{className:"",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Series"}),e.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[e.jsx("input",{type:"text",placeholder:"Search series...",className:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-full md:w-64",value:a,onChange:t=>h(t.target.value)}),e.jsx(b,{onClick:y,children:"Add Series"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Seasons"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:n.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full overflow-hidden",children:t.poster_url?e.jsx("img",{className:"h-10 w-10 object-cover",src:t.poster_url,alt:""}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400 text-xs",children:"N/A"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.original_title})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[t.seasons_count||0," ","Seasons"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="ongoing"?"bg-green-100 text-green-800":t.status==="ended"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>f(t),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-4",children:"Edit"}),e.jsx("button",{onClick:()=>j(t.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})]},t.id))})]})}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("div",{className:"flex gap-1 flex-wrap",children:n.links.map((t,r)=>e.jsx("button",{onClick:()=>{t.url&&o.visit(t.url,{preserveState:!0,preserveScroll:!0})},disabled:!t.url,className:`px-4 py-2 text-sm rounded-md ${t.active?"bg-indigo-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"} ${!t.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},r))})})]})})})}),e.jsx(N,{show:u,onClose:x,maxWidth:"4xl",children:e.jsxs("div",{className:"p-4 sm:p-6 dark:bg-gray-800",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:i?`Edit Series: ${i.title}`:"Create New Series"}),e.jsx(k,{series:i,genres:m||[],persons:g||[],onClose:x,onSuccess:()=>{}})]})})]})}export{R as default};
