import{r as s,c as G,b as U,j as e,H as W}from"./app-Kc1wPzYr.js";import{A as Z,e as N}from"./AdminLayout-DizSFtDy.js";import{M as _}from"./Modal-CgGS9OLV.js";import{I as p}from"./InputLabel-Dk026wEV.js";import{T as c}from"./TextInput-llVmZev1.js";import{P as C}from"./PrimaryButton-BO2mTU3g.js";import{S as D}from"./SecondaryButton-D9fKeQsK.js";import{D as q}from"./DangerButton-DdQCUkuu.js";import{l as z}from"./lodash-Clbi835-.js";import{u as J}from"./useTranslation-bCCtld3E.js";import{F as Q,a as X,b as Y,c as ee}from"./TrashIcon-CnjJijuL.js";import"./ApplicationLogo-BGYl14oe.js";import"./Dropdown-jsiM0321.js";import"./transition-C9Q7umBV.js";import"./portal-BVApR4QZ.js";import"./with-selector-Bvve-oEY.js";function te({title:d,titleId:r,...n},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),d?s.createElement("title",{id:r},d):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const ae=s.forwardRef(te);function se({title:d,titleId:r,...n},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":r},n),d?s.createElement("title",{id:r},d):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 7.5V6.108c0-1.135.845-2.098 1.976-2.192.373-.03.748-.057 1.123-.08M15.75 18H18a2.25 2.25 0 0 0 2.25-2.25V6.108c0-1.135-.845-2.098-1.976-2.192a48.424 48.424 0 0 0-1.123-.08M15.75 18.75v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5A3.375 3.375 0 0 0 6.375 7.5H5.25m11.9-3.664A2.251 2.251 0 0 0 15 2.25h-1.5a2.251 2.251 0 0 0-2.15 1.586m5.8 0c.065.21.1.433.1.664v.75h-6V4.5c0-.231.035-.454.1-.664M6.75 7.5H4.875c-.621 0-1.125.504-1.125 1.125v12c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125V16.5a9 9 0 0 0-9-9Z"}))}const re=s.forwardRef(se);function be({auth:d,vipKeys:r,filters:n}){const{t:a}=J(),[S,y]=s.useState(!1),[M,f]=s.useState(!1),[x,g]=s.useState(null),[j,v]=s.useState(null),[I,K]=s.useState(n.search||""),[E,b]=s.useState(null),{data:o,setData:l,post:F,put:V,delete:T,processing:m,errors:i,reset:w}=G({key:"",duration_days:30,max_uses:"",expires_at:"",is_active:!0}),k=(t=null)=>{t?(g(t),l({key:t.key,duration_days:t.duration_days,max_uses:t.max_uses||"",expires_at:t.expires_at?t.expires_at.split("T")[0]:"",is_active:!!t.is_active})):(g(null),w()),y(!0)},u=()=>{y(!1),w(),g(null)},A=t=>{t.preventDefault(),x?V(route("admin.vip-keys.update",x.id),{onSuccess:u}):F(route("admin.vip-keys.store"),{onSuccess:u})},P=t=>{v(t),f(!0)},h=()=>{f(!1),v(null)},R=()=>{j&&T(route("admin.vip-keys.destroy",j.id),{onSuccess:h})},L=s.useMemo(()=>z.debounce(t=>{U.get(route("admin.vip-keys.index"),{search:t},{preserveState:!0,replace:!0})},300),[]),B=t=>{K(t.target.value),L(t.target.value)},O=(t,H)=>{navigator.clipboard.writeText(t),b(H),setTimeout(()=>b(null),2e3)},$=t=>t.is_active?t.expires_at&&new Date(t.expires_at)<new Date?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-orange-100 text-orange-800 dark:bg-orange-900/30 dark:text-orange-400",children:a("Expired")}):t.max_uses&&t.uses_count>=t.max_uses?e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300",children:a("Depleted")}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400",children:a("Active")}):e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400",children:a("Inactive")});return e.jsxs(Z,{children:[e.jsx(W,{title:a("VIP Keys")}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(N,{className:"w-8 h-8 text-amber-500"}),a("VIP Keys")]}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:a("Manage access keys for VIP subscriptions.")})]}),e.jsxs(C,{onClick:()=>k(),className:"flex items-center gap-2",children:[e.jsx(Q,{className:"w-5 h-5"}),a("Generate Key")]})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700/50",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(X,{className:"h-5 w-5 text-gray-400"})}),e.jsx(c,{type:"text",placeholder:a("Search keys..."),value:I,onChange:B,className:"pl-10 w-full"})]})}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700/50 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("Key")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("Duration")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("Status")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("Usage")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("Expires At")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("Actions")})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:r.data.length>0?r.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-sm font-mono bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200",children:t.key}),e.jsx("button",{onClick:()=>O(t.key,t.id),className:"text-gray-400 hover:text-indigo-500 transition-colors",title:a("Copy to clipboard"),children:E===t.id?e.jsx(ae,{className:"w-5 h-5 text-green-500"}):e.jsx(re,{className:"w-5 h-5"})})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[t.duration_days," ",a("Days")]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:$(t)}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[t.uses_count," / ",t.max_uses?t.max_uses:"âˆž"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:t.expires_at?new Date(t.expires_at).toLocaleDateString():"-"}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx("button",{onClick:()=>k(t),className:"p-1 rounded-full text-indigo-600 hover:bg-indigo-50 dark:text-indigo-400 dark:hover:bg-indigo-900/30 transition-colors",title:a("Edit"),children:e.jsx(Y,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>P(t),className:"p-1 rounded-full text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/30 transition-colors",title:a("Delete"),children:e.jsx(ee,{className:"w-5 h-5"})})]})})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"px-6 py-12 text-center text-gray-500 dark:text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx(N,{className:"w-12 h-12 mb-4 text-gray-300 dark:text-gray-600"}),e.jsx("p",{className:"text-lg font-medium",children:a("No VIP keys found")}),e.jsx("p",{className:"text-sm mt-1",children:a("Try adjusting your search or generate a new key.")})]})})})})]})})})]}),e.jsx(_,{show:S,onClose:u,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-6",children:a(x?"Edit VIP Key":"Generate VIP Key")}),e.jsxs("form",{onSubmit:A,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"key",value:a("Key Code")}),e.jsx(c,{id:"key",type:"text",className:"mt-1 block w-full font-mono",value:o.key,onChange:t=>l("key",t.target.value),placeholder:a("Leave empty to auto-generate")}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:a("A random 16-character string will be generated if left blank.")}),i.key&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.key})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx(p,{htmlFor:"duration_days",value:a("Duration (Days)")}),e.jsx(c,{id:"duration_days",type:"number",className:"mt-1 block w-full",value:o.duration_days,onChange:t=>l("duration_days",t.target.value),required:!0,min:"1"}),i.duration_days&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.duration_days})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"max_uses",value:a("Max Uses")}),e.jsx(c,{id:"max_uses",type:"number",className:"mt-1 block w-full",value:o.max_uses,onChange:t=>l("max_uses",t.target.value),placeholder:a("Leave empty for unlimited"),min:"1"}),i.max_uses&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.max_uses})]})]}),e.jsxs("div",{children:[e.jsx(p,{htmlFor:"expires_at",value:a("Expiration Date")}),e.jsx(c,{id:"expires_at",type:"date",className:"mt-1 block w-full",value:o.expires_at,onChange:t=>l("expires_at",t.target.value)}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:a("Optional. The key will stop working after this date.")}),i.expires_at&&e.jsx("div",{className:"text-red-500 text-sm mt-1",children:i.expires_at})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{id:"is_active",type:"checkbox",className:"rounded border-gray-300 text-indigo-600 shadow-sm focus:ring-indigo-500 dark:border-gray-700 dark:bg-gray-900 dark:focus:ring-indigo-600 dark:focus:ring-offset-gray-800",checked:o.is_active,onChange:t=>l("is_active",t.target.checked)}),e.jsx("label",{htmlFor:"is_active",className:"ml-2 block text-sm text-gray-900 dark:text-gray-300",children:a("Active")})]}),e.jsxs("div",{className:"flex justify-end gap-4 mt-6",children:[e.jsx(D,{onClick:u,disabled:m,children:a("Cancel")}),e.jsx(C,{type:"submit",disabled:m,children:a(x?"Update Key":"Generate Key")})]})]})]})}),e.jsx(_,{show:M,onClose:h,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-4",children:a("Delete VIP Key")}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300 mb-6",children:a("Are you sure you want to delete this VIP key? This action cannot be undone.")}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx(D,{onClick:h,disabled:m,children:a("Cancel")}),e.jsx(q,{onClick:R,disabled:m,children:a("Delete Key")})]})]})})]})}export{be as default};
