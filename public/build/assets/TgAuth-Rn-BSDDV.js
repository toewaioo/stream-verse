import{r as i,a,c as d,j as e}from"./app-BABtax3C.js";import{L as p}from"./Loader-DYmjlO7E.js";function h({auth:s}){const o=i.useRef(!1),[u,t]=i.useState("Initializing..."),[c,l]=i.useState(null);return i.useEffect(()=>{if(s.user){t("Already logged in. Redirecting..."),a.visit(route("home"),{replace:!0});return}const r=window.Telegram?.WebApp;if(!r||!r.initData){t("Not a Mini App. Redirecting..."),a.visit(route("home"),{replace:!0});return}o.current||(o.current=!0,t("Authenticating..."),r.ready(),d.post(route("auth.telegram.mini-app"),{initData:r.initData}).then(()=>{t("Success! Redirecting..."),a.visit(route("home"),{replace:!0})}).catch(n=>{console.error("Telegram authentication failed:",n.response?.data||n.message),l(`Authentication failed. Please try again or contact support. (Reason: ${n.response?.data?.message||"Unknown Error"})`),t("Authentication Failed")}))},[s.user]),c?e.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 dark:bg-[#050505] text-white p-4",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-red-500 mb-4",children:"Authentication Error"}),e.jsx("p",{className:"text-gray-300 mb-6",children:c}),e.jsx("button",{onClick:()=>a.visit(route("home"),{replace:!0}),className:"px-6 py-3 bg-white text-black font-bold uppercase tracking-widest hover:bg-gray-200 transition-colors rounded",children:"Continue to Home"})]})}):e.jsx(p,{title:"Authentication",status:u})}export{h as default};
