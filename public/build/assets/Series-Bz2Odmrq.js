import{r as s,a as n,j as e,H as w}from"./app-DrwdVjaS.js";import{A as N}from"./AdminLayout-_RLVeypy.js";import{M as b}from"./Modal-Lnfhy_Ec.js";import{P as k}from"./PrimaryButton-BvFssXa5.js";import S from"./SeriesForm-Cu5WpHd3.js";import{l as C}from"./lodash-Dx9VgWHg.js";import"./ApplicationLogo-uqGwTIDg.js";import"./Dropdown-DKsLjCYT.js";import"./transition-Do012yve.js";import"./portal-BB7oOUHH.js";import"./useFormPersistence-DSrcMOMM.js";import"./InputLabel-wDTRCA3p.js";import"./InputError-D_wbmATa.js";import"./SecondaryButton-CZEWmSDz.js";import"./Checkbox-qnKXHASe.js";import"./PersonSelector-B1dCZ9Lw.js";import"./element-movement-DE30APUW.js";function q({series:i,genres:m,persons:g,auth:u}){const[h,d]=s.useState(!1),[l,o]=s.useState(null),[a,p]=s.useState(""),c=s.useRef(!0);console.log(i);const y=C.debounce(t=>{n.get(route("admin.series"),{search:a},{preserveState:!0,replace:!0})});s.useEffect(()=>{if(c.current){c.current=!1;return}y(a)},[a]);const f=()=>{o(null),d(!0)},j=async t=>{try{const r=await axios.get(route("admin.series.show",t.id));o(r.data),d(!0)}catch(r){console.error("Failed to fetch series details",r)}},x=()=>{d(!1),o(null)},v=t=>{confirm("Are you sure you want to delete this series?")&&n.delete(route("admin.series.destroy",t))};return e.jsxs(N,{children:[e.jsx(w,{title:"Manage Series"}),e.jsx("div",{className:"",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("div",{className:"bg-white dark:bg-gray-800 overflow-hidden shadow-sm sm:rounded-lg",children:e.jsxs("div",{className:"p-6 text-gray-900 dark:text-gray-100",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Series"}),e.jsxs("div",{className:"flex items-center gap-4 w-full md:w-auto",children:[e.jsx("input",{type:"text",placeholder:"Search series...",className:"border-gray-300 dark:border-gray-700 dark:bg-gray-900 dark:text-gray-300 focus:border-indigo-500 focus:ring-indigo-500 rounded-md shadow-sm w-full md:w-64",value:a,onChange:t=>p(t.target.value)}),e.jsx(k,{onClick:f,children:"Add Series"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Title"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Seasons"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:i.data.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full overflow-hidden",children:t.poster_url?e.jsx("img",{className:"h-10 w-10 object-cover",src:t.poster_url,alt:""}):e.jsx("div",{className:"h-full w-full flex items-center justify-center text-gray-400 text-xs",children:"N/A"})}),e.jsxs("div",{className:"ml-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 dark:text-white",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.original_title})]})]})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-400",children:[t.seasons_count||0," ","Seasons"]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="ongoing"?"bg-green-100 text-green-800":t.status==="ended"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:t.status})}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{onClick:()=>j(t),className:"text-indigo-600 hover:text-indigo-900 dark:text-indigo-400 dark:hover:text-indigo-300 mr-4",children:"Edit"}),u.user.role==="admin"&&e.jsx("button",{onClick:()=>v(t.id),className:"text-red-600 hover:text-red-900 dark:text-red-400 dark:hover:text-red-300",children:"Delete"})]})]},t.id))})]})}),e.jsx("div",{className:"mt-6 flex justify-center",children:e.jsx("div",{className:"flex gap-1 flex-wrap",children:i.links.map((t,r)=>e.jsx("button",{onClick:()=>{t.url&&n.visit(t.url,{preserveState:!0,preserveScroll:!0})},disabled:!t.url,className:`px-4 py-2 text-sm rounded-md ${t.active?"bg-indigo-600 text-white":"bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-50 dark:hover:bg-gray-600"} ${!t.url&&"opacity-50 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},r))})})]})})})}),e.jsx(b,{show:h,onClose:x,maxWidth:"4xl",children:e.jsxs("div",{className:"p-4 sm:p-6 dark:bg-gray-800",children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 dark:text-gray-100 mb-4",children:l?`Edit Series: ${l.title}`:"Create New Series"}),e.jsx(S,{series:l,genres:m||[],persons:g||[],onClose:x,onSuccess:()=>{}})]})})]})}export{q as default};
